---
- name: configure first control plane node
  hosts: control-plane[0]

  roles:
    - role: k3s
      vars:
        cluster_init: true

- name: configure rest of the control plane nodes
  hosts: control-plane[1:]

  roles:
    - role: k3s

- name: configure worker nodes
  hosts: worker

  roles:
    - role: k3s
